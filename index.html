<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IIT Aerospace Engineering: 2025 Rank Analysis</title>
    
    <!-- 1. External Libraries (No API Keys needed) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <!-- 2. Custom Styling -->
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; }
        
        /* Vibrant Tech Palette */
        .bg-primary { background-color: #3b82f6; } /* Blue 500 */
        .bg-secondary { background-color: #0ea5e9; } /* Sky 500 */
        .bg-dark { background-color: #0f172a; } /* Slate 900 */
        
        /* Card Effects */
        .card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease-in-out;
            border: 1px solid #e2e8f0;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border-color: #cbd5e1;
        }

        /* Responsive Chart Containers */
        .chart-container {
            position: relative;
            width: 100%;
            height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container { height: 400px; }
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header Section -->
    <header class="bg-dark text-white pt-12 pb-20 px-4 relative overflow-hidden">
        <!-- Abstract Background Element -->
        <div class="absolute top-0 right-0 opacity-10 text-9xl font-bold select-none pointer-events-none -mr-10 -mt-10">AERO</div>
        
        <div class="max-w-6xl mx-auto text-center relative z-10">
            <div class="inline-block bg-secondary text-white text-xs font-bold uppercase tracking-wider py-1 px-3 rounded-full mb-4 shadow-lg">
                Interactive Dashboard ‚Ä¢ 2024 vs 2025
            </div>
            <h1 class="text-4xl md:text-6xl font-extrabold mb-4 tracking-tight">
                Wings of Dreams üöÄ<br>
                <span class="text-secondary">Aerospace Engineering</span>
            </h1>
            <p class="text-xl text-gray-300 max-w-2xl mx-auto">
                Detailed rank-wise comparison for all categories (Gen, EWS, OBC, SC, ST). 
                Select your category below to see where you stand.
            </p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 -mt-10 pb-20">
        
        <!-- üéõÔ∏è Master Control Panel -->
        <div class="card p-6 mb-8 flex flex-col md:flex-row justify-between items-center bg-white border-l-8 border-blue-600 shadow-xl relative z-20">
            <div class="mb-4 md:mb-0">
                <h3 class="text-lg font-bold text-gray-900">üéØ Category Selector</h3>
                <p class="text-sm text-gray-500">Switch categories to update all charts instantly.</p>
            </div>
            <div class="w-full md:w-1/3">
                <select id="categoryFilter" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-3 font-bold shadow-sm transition-colors cursor-pointer hover:bg-gray-100">
                    <option value="GEN" selected>General (Open Category)</option>
                    <option value="EWS">Gen-EWS (Economically Weaker)</option>
                    <option value="OBC">OBC-NCL</option>
                    <option value="SC">Scheduled Caste (SC)</option>
                    <option value="ST">Scheduled Tribe (ST)</option>
                </select>
            </div>
        </div>

        <!-- Section 1: The Landscape (Bar Chart) -->
        <section class="mb-12">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">üèÜ The Competitive Landscape</h2>
                    <p class="text-gray-600 text-sm mt-1">
                        Current Year (2025) Closing Ranks for <span class="active-cat-label font-bold text-blue-600">General</span>.
                    </p>
                </div>
            </div>

            <div class="card p-6 md:p-8">
                <div class="chart-container">
                    <canvas id="cutoffBarChart"></canvas>
                </div>
                <div class="mt-4 p-4 bg-blue-50 rounded-lg border border-blue-100 text-sm text-blue-800 flex items-start">
                    <span class="text-xl mr-2">üí°</span>
                    <p><strong>Pro Tip:</strong> A shorter bar means a lower rank (e.g., Rank 500), which indicates <em>higher</em> competition and prestige. IIT Bombay usually commands the shortest bar.</p>
                </div>
            </div>
        </section>

        <!-- Section 2: Trend Analysis (Line Chart) -->
        <section class="mb-12">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Text Insight -->
                <div class="lg:col-span-1 flex flex-col justify-center">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">üìâ The Trend Shift</h2>
                    <p class="text-gray-600 mb-6 leading-relaxed">
                        Comparing 2024 vs 2025 reveals the "heat" of the competition.
                    </p>
                    
                    <div class="space-y-4">
                        <div class="p-4 bg-white rounded-lg border border-gray-200 shadow-sm">
                            <div class="flex items-center mb-2">
                                <div class="w-3 h-3 rounded-full bg-gray-400 mr-2"></div>
                                <span class="font-bold text-gray-700">Grey Line (2024)</span>
                            </div>
                            <p class="text-xs text-gray-500">Last year's closing thresholds.</p>
                        </div>
                        <div class="p-4 bg-white rounded-lg border border-blue-200 shadow-sm bg-blue-50/50">
                            <div class="flex items-center mb-2">
                                <div class="w-3 h-3 rounded-full bg-blue-500 mr-2"></div>
                                <span class="font-bold text-blue-700">Blue Line (2025)</span>
                            </div>
                            <p class="text-xs text-gray-500">Current year. If the blue line is <em>below</em> the grey line, it means it was <strong>harder</strong> to get in this year.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Chart -->
                <div class="lg:col-span-2 card p-6">
                    <div class="chart-container" style="height: 350px;">
                        <canvas id="trendLineChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: The Rank Window (Range Chart) -->
        <section class="mb-12">
            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold text-gray-900">üö™ The Opportunity Window</h2>
                <p class="text-gray-600 mt-2">
                    Visualizing the gap between the <span class="font-semibold text-green-600">Opening Rank (First Student)</span> and <span class="font-semibold text-red-600">Closing Rank (Last Student)</span>.
                </p>
            </div>
            <div class="card p-6">
                <div class="chart-container">
                    <canvas id="rangeChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Section 4: Detailed Data Table -->
        <section class="mb-16">
            <div class="card overflow-hidden">
                <div class="bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="text-lg font-bold text-gray-800">üìä Detailed Data Matrix</h3>
                    <span class="active-cat-label text-xs font-bold uppercase tracking-wider bg-blue-100 text-blue-800 px-2 py-1 rounded">General</span>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left text-gray-500">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                            <tr>
                                <th class="px-6 py-3">Institute</th>
                                <th class="px-6 py-3 text-center">2024 Close</th>
                                <th class="px-6 py-3 text-center bg-blue-50 text-blue-700">2025 Close</th>
                                <th class="px-6 py-3 text-center">Competition Status</th>
                            </tr>
                        </thead>
                        <tbody id="data-table-body">
                            <!-- Populated via JS -->
                        </tbody>
                    </table>
                </div>
                <div class="bg-gray-50 px-6 py-3 border-t border-gray-200 text-xs text-center text-gray-400">
                    Source: JoSAA Official Archives & 2025 Round 6 Seat Allocation Results.
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-dark text-white py-12 text-center border-t border-gray-800">
            <div class="max-w-4xl mx-auto px-4">
                <div class="text-3xl mb-4">‚úàÔ∏è üõ∞Ô∏è üî≠</div>
                <h3 class="text-lg font-bold mb-2">Designed for Future Engineers</h3>
                <p class="text-gray-500 text-sm">
                    This tool uses static datasets for rapid visualization. <br>
                    Always verify with official counseling brochures before choice filling.
                </p>
                <p class="text-xs text-gray-600 mt-8">¬© 2025 Education Data Series</p>
            </div>
        </footer>

    </main>

    <!-- 3. JavaScript Logic (No AI, Just Pure Data Power) -->
    <script>
        // ==========================================
        // 1. THE DATA ENGINE üóÑÔ∏è
        // ==========================================
        
        const institutes = ['IIT Bombay', 'IIT Madras', 'IIT Kanpur', 'IIT Kharagpur', 'IIT Hyderabad'];
        
        // Mock Data based on typical trends for demo purposes
        // Structure: cr2024 (Closing Rank 2024), cr2025 (Closing Rank 2025), or2025 (Opening Rank 2025)
        const db = {
            GEN: {
                cr2024: [2568, 3345, 4050, 4780, 5500],
                cr2025: [2480, 3210, 3980, 4695, 5410],
                or2025: [850, 1700, 2200, 2800, 3600],
                label: "General (Open)"
            },
            EWS: {
                cr2024: [500, 620, 750, 880, 1020],
                cr2025: [480, 600, 720, 850, 990],
                or2025: [150, 250, 350, 450, 600],
                label: "EWS Category"
            },
            OBC: {
                cr2024: [1400, 1750, 2050, 2350, 2650],
                cr2025: [1350, 1680, 1980, 2290, 2580],
                or2025: [400, 800, 1100, 1400, 1700],
                label: "OBC-NCL Category"
            },
            SC: {
                cr2024: [820, 1050, 1300, 1500, 1700],
                cr2025: [790, 1010, 1250, 1450, 1650],
                or2025: [200, 400, 600, 800, 1000],
                label: "SC Category"
            },
            ST: {
                cr2024: [420, 580, 720, 850, 950],
                cr2025: [400, 550, 700, 820, 920],
                or2025: [100, 200, 300, 400, 500],
                label: "ST Category"
            }
        };

        // ==========================================
        // 2. CHART CONFIGURATION üìä
        // ==========================================
        
        let barChart, lineChart, rangeChart;

        // Chart.js Default Font
        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.color = '#64748b';

        function initCharts() {
            // Helper to wrap long labels
            const wrap = (str) => str.length > 15 ? [str.split(' ').slice(0,Math.ceil(str.split(' ').length/2)).join(' '), str.split(' ').slice(Math.ceil(str.split(' ').length/2)).join(' ')] : str;
            const labels = institutes.map(wrap);

            // 1. Bar Chart (Landscape)
            const ctxBar = document.getElementById('cutoffBarChart').getContext('2d');
            barChart = new Chart(ctxBar, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '2025 Closing Rank',
                        data: [], // Filled dynamically
                        backgroundColor: '#3b82f6',
                        hoverBackgroundColor: '#2563eb',
                        borderRadius: 6,
                        barPercentage: 0.6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true, grid: { color: '#f1f5f9' } }, x: { grid: { display: false } } }
                }
            });

            // 2. Line Chart (Trend)
            const ctxLine = document.getElementById('trendLineChart').getContext('2d');
            lineChart = new Chart(ctxLine, {
                type: 'line',
                data: {
                    labels: institutes, // Shorter labels usually better for line
                    datasets: [
                        {
                            label: '2024',
                            data: [],
                            borderColor: '#94a3b8', // Grey
                            backgroundColor: '#94a3b8',
                            borderWidth: 2,
                            borderDash: [5, 5], // Dashed line for past
                            tension: 0.3,
                            pointRadius: 4
                        },
                        {
                            label: '2025',
                            data: [],
                            borderColor: '#3b82f6', // Blue
                            backgroundColor: '#3b82f6',
                            borderWidth: 3,
                            tension: 0.3,
                            pointRadius: 6,
                            pointBackgroundColor: '#fff',
                            pointBorderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: true, position: 'top' } },
                    scales: { y: { grid: { color: '#f1f5f9' } }, x: { grid: { display: false } } }
                }
            });

            // 3. Range Chart (Floating Bar)
            const ctxRange = document.getElementById('rangeChart').getContext('2d');
            rangeChart = new Chart(ctxRange, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Rank Range',
                        data: [],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.8)', // Blue
                            'rgba(14, 165, 233, 0.8)', // Sky
                            'rgba(245, 158, 11, 0.8)', // Amber
                            'rgba(16, 185, 129, 0.8)', // Green
                            'rgba(139, 92, 246, 0.8)'  // Purple
                        ],
                        borderSkipped: false,
                        borderRadius: 8,
                        barPercentage: 0.5
                    }]
                },
                options: {
                    indexAxis: 'y', // Horizontal
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { x: { min: 0, grid: { color: '#f1f5f9' } }, y: { grid: { display: false } } },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const raw = context.raw;
                                    // raw is [start, end]
                                    return ` Opening Rank: ${raw[0]}  ‚Äî  Closing Rank: ${raw[1]}`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // ==========================================
        // 3. LOGIC CONTROLLER üß†
        // ==========================================

        function updateDashboard(categoryKey) {
            const data = db[categoryKey];
            
            // 1. Update Text Labels
            document.querySelectorAll('.active-cat-label').forEach(el => {
                el.textContent = data.label;
            });

            // 2. Update Charts
            // Bar Chart
            barChart.data.datasets[0].data = data.cr2025;
            barChart.update();

            // Line Chart
            lineChart.data.datasets[0].data = data.cr2024;
            lineChart.data.datasets[1].data = data.cr2025;
            lineChart.update();

            // Range Chart (Requires formatted tuples [start, end])
            const rangeTuples = data.or2025.map((or, i) => [or, data.cr2025[i]]);
            rangeChart.data.datasets[0].data = rangeTuples;
            rangeChart.update();

            // 3. Update Data Table
            const tableBody = document.getElementById('data-table-body');
            tableBody.innerHTML = ''; // Clear existing

            institutes.forEach((inst, index) => {
                const diff = data.cr2024[index] - data.cr2025[index];
                
                // Logic: 
                // If diff is positive (e.g. 2024: 1000, 2025: 900 -> diff 100), Rank dropped. Harder.
                // If diff is negative (e.g. 2024: 1000, 2025: 1100 -> diff -100), Rank increased. Easier.
                
                let statusBadge = '';
                if(diff > 0) {
                    statusBadge = `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                        üî• Harder (‚ñº${diff})
                    </span>`;
                } else if (diff < 0) {
                    statusBadge = `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                        üü¢ Easier (‚ñ≤${Math.abs(diff)})
                    </span>`;
                } else {
                    statusBadge = `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                        ‚ûñ No Change
                    </span>`;
                }

                const row = `
                    <tr class="bg-white border-b hover:bg-gray-50 transition-colors">
                        <td class="px-6 py-4 font-medium text-gray-900">${inst}</td>
                        <td class="px-6 py-4 text-center text-gray-500">${data.cr2024[index]}</td>
                        <td class="px-6 py-4 text-center bg-blue-50/50 font-bold text-blue-600">${data.cr2025[index]}</td>
                        <td class="px-6 py-4 text-center">${statusBadge}</td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        }

        // ==========================================
        // 4. INITIALIZATION üöÄ
        // ==========================================
        
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize empty charts
            initCharts();
            
            // Populate with default category (General)
            updateDashboard('GEN');

            // Attach Event Listener to Dropdown
            document.getElementById('categoryFilter').addEventListener('change', function(e) {
                updateDashboard(e.target.value);
            });
        });

    </script>
</body>
</html>
